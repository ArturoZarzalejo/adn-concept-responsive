var matrixTrans=function(){function t(){}return t.prototype={info:function(){console.log(this)},move:function(){var t=this.stringToMatrix(arguments[2]);return t[12]+=arguments[0],t[13]+=arguments[1],this.matrixToString(t)},resize:function(){var t=this.stringToMatrix(arguments[2]),a=this.getAngle(t),i=t[0]/Math.cos(a),r=t[5]/Math.cos(a),n=arguments[5]||{x:1,y:1},s=arguments[0]*Math.cos(a)+arguments[1]*Math.sin(a),h=-arguments[0]*Math.sin(a)+arguments[1]*Math.cos(a),o=arguments[3]/i,M=arguments[4]/r,e=(i*o+(n.x?1:-1)*s)/o,c=(r*M+(n.y?1:-1)*h)/M;return arguments[6]&&(resize=e/i>c/r?e/i:c/r,e=i*resize,c=r*resize),t[0]=e*Math.cos(a),t[1]=e*Math.sin(a),t[5]=c*Math.cos(a),t[4]=-c*Math.sin(a),t[12]=t[12]+(n.x?1:-1)*(o*e-o*i)/2,t[13]=t[13]+(n.y?1:-1)*(M*c-M*r)/2,this.matrixToString(t)},rotate:function(){var t=this.stringToMatrix(arguments[1]),a=this.getAngle(t),i=arguments[0],r=t[0]/Math.cos(a),n=t[5]/Math.cos(a);return t[0]=r*Math.cos(i),t[1]=-r*Math.sin(i),t[5]=n*Math.cos(i),t[4]=n*Math.sin(i),this.matrixToString(t)},matrixToString:function(){for(var t=arguments[0]||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],a="matrix3d(",i=0;i<t.length;i++)a=a+(0==i?"":",")+t[i];return a+=")"},stringToMatrix:function(){var t=arguments[0]||"matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";t=t.replace("matrix3d(",""),t=t.replace(")",""),matrix=t.split(",");for(var a=0;a<matrix.length;a++)matrix[a]=parseFloat(matrix[a]);return matrix},getAngle:function(){var t=arguments[0],a=Math.atan(t[1]/t[0]);return t[0]<0&&(a=(t[1]>0?-1:1)*Math.PI+a),a},getScale:function(){var t=arguments[0],a=this.getAngle(t),i=t[0]/Math.cos(a),r=t[5]/Math.cos(a);return{x:Math.abs(i),y:Math.abs(r),angle:a}},getContainerMatrix:function(){var t=this.stringToMatrix(arguments[0]),a=this.stringToMatrix(arguments[0]),i=this.getAngle(t),r=t[0]/Math.cos(i),n=t[5]/Math.cos(i),s=arguments[1],h=arguments[2],o=((s-Math.abs(Math.tan(i))*h)/(Math.abs(Math.cos(i))-Math.abs(Math.sin(i))*Math.abs(Math.tan(i))),(h-Math.abs(Math.tan(i))*s)/(Math.abs(Math.cos(i))-Math.abs(Math.sin(i))*Math.abs(Math.tan(i))));return a[0]=1,a[1]=0,a[5]=1,a[4]=0,a[12]=t[12]+30,a[13]=t[13]-70-(h-o)/2+(o-o*n)/2,{matrix:this.matrixToString(t),menu:this.matrixToString(a),scaleX:Math.abs(r),scaleY:Math.abs(n)}}},t}();